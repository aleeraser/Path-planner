<html>

<head>
    <title>Canvas Grid</title>
    <link rel="stylesheet" type="text/css" href="../css/slider.css">
    <link rel="stylesheet" type="text/css" href="../css/general.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
    <div style='margin:0.1em;' class="parentDiv">
        <canvas id="canvas" style="border:1px solid teal;">
        </canvas>
        <div id="settings">
            <p>Cell number:</p>
            <input type="range" min="1" max="60" value="30" class="slider" id="cellNumberSlider"></input>
            <p> Planning method:</p>
            <select class="form-control settingSelect" id="methodSelect">
                <option>Cellular Decomposition</option>
                <option>Visibility Graph</option>
                <option>Probabilistic Roadmap</option>
            </select>
            </br>
            <button type="button" class="btn btn-default" onclick="redrawGrid()">Set and Redraw</button>
        </div>
    </div>

    <script src="grid.js"></script>
    <script src="../libs/graph.js"></script>
    <script>
        var grid;
        var side_length = 500,
            cell_number = 30,
            cell_spacing = 0;

        function redrawGrid() {
            grid.setSize(cell_number, cell_number);
            grid.generate();
        }

        // Create class passing canvas object id
        grid = new Grid('canvas', side_length, cell_number);

        // Pixels between cells
        grid.setSpacing(cell_spacing, cell_spacing);

        // Colors
        grid.setBackgroundColor(grid.BG_COLOR);
        grid.setCellsColor(grid.BG_COLOR);

        // Apply settings and generate grid on canvas
        grid.generate();

        // Click listener
        grid.setOnCellClickDrag(function (x, y) {
            grid.toggleWall(x, y);
        })

        grid.setOnCellRightClick(function (cell) {
            grid.relocateStartEnd(cell);
        })

        var slider = document.getElementById("cellNumberSlider");

        slider.oninput = function () {
            cell_number = this.value;
        }
    </script>
</body>

</html>