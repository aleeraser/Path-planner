<html>

<head>
    <title>Canvas Grid</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="css/materialize.css" media="screen,projection" />
    <link rel="stylesheet" type="text/css" href="css/general.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

</head>

<body>
    <canvas id="canvas"></canvas>
    <!-- <div class="container"> -->
    <div class="card blue-grey lighten-5">
        <div class="card-content">

            <div class="input-field col s12">
                <p>Cell number</p>
                <input type="range" min="1" max="60" value="30" id="cellNumberSlider"></input>
            </div>

            <br>

            <div class="input-field col s12">
                <select id="methodSelect">
                    <option value="decomposition" selected>Cellular Decomposition</option>
                    <option value="visibility">Visibility Graph</option>
                    <option value="probabilistic">Probabilistic Roadmap</option>
                    <option value="bug1">Bug1</option>
                    <option value="bug2">Bug2</option>
                    <option value="tangent-bug">Tangent Bug</option>
                </select>
                <label>Planning algorithm</label>
            </div>

        </div>
        <div class="card-action center-align">
            <button class="btn blue-grey white-text" onclick="clearWalls()">Clear walls</button>
            <button class="btn blue-grey white-text" onclick="grid.clearPaths()">Clear path</button>
        </div>

    </div>

    <script type="text/javascript" src="js/grid.js"></script>
    <script type="text/javascript" src="libs/graph.js"></script>
    <script type="text/javascript" src="libs/materialize.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script>
        var grid;
        var width = document.body.clientWidth,
            height = document.body.clientHeight,
            cell_number = 20;

        function clearWalls() {
            grid.clearWalls();
        }

        function clearPaths() {
            grid.clearPaths();
        }

        // Create class passing canvas object id
        grid = new Grid('canvas', width, height, cell_number);

        // Apply settings and generate grid on canvas
        grid.generate();

        // Click listener
        grid.setOnCellClickDrag(function (x, y) {
            grid.toggleWall(x, y);
        });

        grid.setOnCellRightClick(function (cell) {
            grid.relocateStartEnd(cell);
        });

        var slider = document.getElementById("cellNumberSlider");
        slider.oninput = function () {
            cell_number = this.value;
        };

        var select = document.getElementById("methodSelect");
        grid.setAlgorithm(select.value);
        select.onchange = function () {
            grid.setAlgorithm(this.value);
            grid.evaluatePath();
        };

        document.addEventListener('DOMContentLoaded', function () {
            var elems = document.querySelectorAll('select');
            var instances = M.FormSelect.init(elems);
        });
    </script>
</body>

</html>